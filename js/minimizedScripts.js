var contactsWindow=document.querySelector(".map-right"),writeUsLink=contactsWindow.querySelector(".write-us-button"),writeUs=document.querySelector(".modal-contact-form"),writeClose=writeUs.querySelector(".modal-close"),userName=writeUs.querySelector(".user-name"),userEmail=writeUs.querySelector(".user-email"),writeForm=writeUs.querySelector(".write-us-form"),userText=writeUs.querySelector(".user-text"),overlay=document.querySelector(".overlay"),isStorageSupport=!0,storageName="",storageEmail="",userContent=[userName,userEmail,userText];try{storageName=localStorage.getItem("name")}catch(e){isStorageSupport=!1}try{storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.add("modal-show"),overlay.classList.add("overlay-active"),storageName?(userName.value=storageName,userEmail.value=storageEmail,userText.focus()):(userName.focus(),storageEmail&&(userEmail.value=storageEmail)),userName&&userEmail&&userText.focus()}),writeClose.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.remove("modal-show"),overlay.classList.remove("overlay-active"),writeUs.classList.remove("modal-error");for(var s=0;s<userContent.length;s++)userContent[s].classList.remove("text-error")}),writeForm.addEventListener("submit",function(e){if(userName.value&&userEmail.value&&userText.value)isStorageSupport&&(localStorage.setItem("name",userName.value),localStorage.setItem("email",userEmail.value));else{e.preventDefault(),writeUs.classList.remove("modal-error"),writeUs.offsetWidth=writeUs.offsetWidth,writeUs.classList.add("modal-error");for(var s=0;s<userContent.length;s++)userContent[s].classList.add("text-error");for(s=0;s<userContent.length;s++){var t=userContent[s];t.value||(t.focus(),s=userContent.length)}}}),window.addEventListener("keydown",function(e){if(27===e.keyCode&&(e.preventDefault(),writeUs.classList.contains("modal-show"))){writeUs.classList.remove("modal-show"),overlay.classList.remove("overlay-active"),writeUs.classList.remove("modal-error");for(var s=0;s<userContent.length;s++)userContent[s].classList.remove("text-error")}}),overlay.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.remove("modal-show"),overlay.classList.remove("overlay-active"),writeUs.classList.remove("modal-error");for(var s=0;s<userContent.length;s++)userContent[s].classList.remove("text-error")});var map=document.querySelector(".modal-map"),mapLink=document.querySelector(".map-link"),mapClose=map.querySelector(".modal-close");mapLink.addEventListener("click",function(e){e.preventDefault(),map.classList.add("modal-show"),overlay.classList.add("overlay-active")}),mapClose.addEventListener("click",function(e){e.preventDefault(),map.classList.remove("modal-show"),overlay.classList.remove("overlay-active"),console.log("Клик")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),map.classList.contains("modal-show")&&(map.classList.remove("modal-show"),overlay.classList.remove("overlay-active")))}),overlay.addEventListener("click",function(e){e.preventDefault(),map.classList.remove("modal-show"),overlay.classList.remove("overlay-active")});var slider=document.querySelector(".promo-slider"),slides=slider.querySelectorAll(".slide"),pagination=slider.querySelectorAll(".pg-button"),nextSlide=slider.querySelector(".next-slide"),previousSlide=slider.querySelector(".previous-slide"),clickHandler=function(s,t){s.addEventListener("click",function(){for(var e=0;e<slides.length;e++)slides[e].classList.contains("slide-current")&&(slides[e].classList.remove("slide-current"),pagination[e].classList.remove("pg-current"));t.classList.add("slide-current"),s.classList.add("pg-current")})};nextSlide.addEventListener("click",function(){for(var e=0;e<slides.length;e++)slides[e].classList.contains("slide-current")&&e+1<slides.length?(slides[e].classList.remove("slide-current"),slides[e+1].classList.add("slide-current"),pagination[e].classList.remove("pg-current"),pagination[e+1].classList.add("pg-current"),e=slides.length):slides[e].classList.contains("slide-current")&&e+1>=slides.length&&(slides[e].classList.remove("slide-current"),slides[0].classList.add("slide-current"),pagination[e].classList.remove("pg-current"),pagination[0].classList.add("pg-current"),e=slides.length)}),previousSlide.addEventListener("click",function(){for(var e=0;e<slides.length;e++)slides[e].classList.contains("slide-current")&&0!==e?(slides[e].classList.remove("slide-current"),slides[e-1].classList.add("slide-current"),pagination[e].classList.remove("pg-current"),pagination[e-1].classList.add("pg-current"),e=slides.length):slides[e].classList.contains("slide-current")&&0==e&&(slides[e].classList.remove("slide-current"),slides[slides.length-1].classList.add("slide-current"),pagination[e].classList.remove("pg-current"),pagination[slides.length-1].classList.add("pg-current"),e=slides.length)});for(var i=0;i<pagination.length;i++)clickHandler(pagination[i],slides[i]);var cart=document.querySelector(".modal-cart"),cartLink=document.querySelectorAll(".buy-button"),cartClose=(overlay=document.querySelector(".overlay"),cart.querySelector(".modal-close")),continueButton=cart.querySelector(".continue");for(i=0;i<cartLink.length;i++)cartLink[i].addEventListener("click",function(e){e.preventDefault(),cart.classList.add("cart-show"),overlay.classList.add("overlay-active")});cartClose.addEventListener("click",function(e){e.preventDefault(),cart.classList.remove("cart-show"),overlay.classList.remove("overlay-active")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),cart.classList.contains("cart-show")&&(cart.classList.remove("cart-show"),overlay.classList.remove("overlay-active")))}),overlay.addEventListener("click",function(e){e.preventDefault(),cart.classList.remove("cart-show"),overlay.classList.remove("overlay-active")}),continueButton.addEventListener("click",function(e){e.preventDefault(),cart.classList.remove("cart-show"),overlay.classList.remove("overlay-active")});